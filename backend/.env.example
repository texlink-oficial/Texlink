# ===========================================
# TEXLINK BACKEND - Environment Configuration
# ===========================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control

# ===========================================
# REQUIRED - Application will fail without these
# ===========================================

# Database (PostgreSQL)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL="postgresql://username:password@localhost:5432/texlink?schema=public"

# JWT Authentication
# IMPORTANT: Generate strong random secrets for production (min 32 characters)
# Use: openssl rand -base64 64
JWT_SECRET="jwt_secret_change_in_production"
JWT_REFRESH_SECRET="jwt_refresh_secret_change_in_production"
JWT_EXPIRATION="1h"
JWT_REFRESH_EXPIRATION="7d"

# ===========================================
# APPLICATION
# ===========================================

PORT=3000
NODE_ENV=development

# CORS - Comma-separated list of allowed origins
# Example: https://app.texlink.com.br,https://admin.texlink.com.br
CORS_ORIGINS=http://localhost:5173,http://localhost:3001

# ===========================================
# OPTIONAL - Redis (for rate limiting and caching)
# ===========================================
# If not provided, in-memory fallback will be used (not recommended for production)
REDIS_URL=redis://localhost:6379

# ===========================================
# INTEGRATIONS - External Services
# ===========================================

# CNPJ Validation (ReceitaWS)
RECEITAWS_URL=https://receitaws.com.br/v1/cnpj
RECEITAWS_API_KEY=

# Email (SendGrid)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@texlink.com.br
SENDGRID_FROM_NAME=Texlink

# SendGrid Webhook Security
# IMPORTANT: Enable in production
SENDGRID_WEBHOOK_SIGNATURE_VALIDATION=true
SENDGRID_WEBHOOK_PUBLIC_KEY=

# WhatsApp (Twilio)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
TWILIO_STATUS_CALLBACK=

# Twilio Webhook Security
# IMPORTANT: Enable in production
TWILIO_WEBHOOK_SIGNATURE_VALIDATION=true

# ===========================================
# STORAGE (File uploads)
# ===========================================

# Storage type: 'local' (default) or 's3'
STORAGE_TYPE=local

# AWS S3 Configuration (required if STORAGE_TYPE=s3)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=

# CloudFront CDN (optional, for S3 storage)
# If set, file URLs will use CloudFront instead of direct S3 URLs
CLOUDFRONT_DOMAIN=

# ===========================================
# CREDIT ANALYSIS
# ===========================================

# Credit provider: 'mock' (default), 'serasa', or 'spc'
# Mock provider is used for development, returns simulated data
CREDIT_PROVIDER=mock

# Serasa Experian Configuration (if CREDIT_PROVIDER=serasa)
SERASA_API_URL=https://api.serasaexperian.com.br
SERASA_CLIENT_ID=
SERASA_CLIENT_SECRET=

# SPC Brasil Configuration (if CREDIT_PROVIDER=spc)
SPC_API_URL=
SPC_USERNAME=
SPC_PASSWORD=

# ===========================================
# LEGAL ANALYSIS (Judicial Processes)
# ===========================================

# Datajud CNJ - API Pública (gratuita)
# Chave disponível em: https://datajud-wiki.cnj.jus.br/api-publica/acesso
# Documentação: https://datajud-wiki.cnj.jus.br/api-publica/
# Se não configurado, mock provider será usado
DATAJUD_API_KEY=

# ===========================================
# RESTRICTIONS ANALYSIS (CADIN, CEIS, CNEP)
# ===========================================

# Portal da Transparência Configuration (optional)
# Free API key available at: https://api.portaldatransparencia.gov.br/
# If not configured, mock provider will be used
PORTAL_TRANSPARENCIA_API_URL=https://api.portaldatransparencia.gov.br
PORTAL_TRANSPARENCIA_API_KEY=

# ===========================================
# MONITORING (Optional)
# ===========================================

# Sentry Error Tracking
SENTRY_DSN=

# Log Level (error, warn, log, debug, verbose)
LOG_LEVEL=log

# ===========================================
# RAILWAY DEPLOYMENT
# ===========================================
# When deploying to Railway, use variable references:
#
# DATABASE_URL=${{Postgres.DATABASE_URL}}
# REDIS_URL=${{Redis.REDIS_URL}}
#
# Railway automatically injects PORT, don't set it manually
